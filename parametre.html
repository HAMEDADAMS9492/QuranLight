<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Param√®tres - QuranLight</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/style.css" />

    <style>
      :root {
        /* √âmeraude Royale (Par d√©faut) */
        --gold: #b08d57;
        --gold-bright: #d4bc96;
        --gold-glow: rgba(176, 141, 87, 0.4);
        --emerald-dark: #05140f;
        --emerald-mid: #0a2d20;
        --glass: rgba(255, 255, 255, 0.05);
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* --- VARIANTES DE TH√àMES --- */
      body.theme-midnight {
        --gold: #a3aab0; /* Argent */
        --gold-bright: #e1e4e6;
        --gold-glow: rgba(163, 170, 176, 0.4);
        --emerald-dark: #050a14;
        --emerald-mid: #0a182d;
      }

      body.theme-dark {
        --gold: #b08d57;
        --gold-bright: #d4bc96;
        --gold-glow: rgba(176, 141, 87, 0.3);
        --emerald-dark: #000000;
        --emerald-mid: #111111;
      }

      body {
        background: radial-gradient(
          circle at top,
          var(--emerald-mid),
          var(--emerald-dark)
        );
        background-attachment: fixed;
        color: white;
        font-family: "Poppins", sans-serif;
        margin: 0;
        padding-bottom: 50px;
        overflow-x: hidden;
        transition: background 0.5s ease; /* Transition douce pour le changement de th√®me */
      }

      /* --- HEADER PREMIUM --- */
      .settings-header {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        padding: 15px 30px;
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(176, 141, 87, 0.3);
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .back-home {
        text-decoration: none;
        color: white;
        background: rgba(255, 255, 255, 0.05);
        padding: 8px 12px;
        border-radius: 10px;
        border: 1px solid rgba(176, 141, 87, 0.3);
        font-size: 0.85rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: var(--transition);
        width: fit-content;
      }

      .back-home:hover,
      .back-home:active {
        background: var(--gold);
        color: var(--emerald-dark);
        border-color: var(--gold-bright);
        box-shadow: 0 0 15px var(--gold-glow);
      }

      .header-center {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .header-center i {
        font-size: 1.8rem;
        color: var(--gold);
        filter: drop-shadow(0 0 8px var(--gold-glow));
        animation: spin-slow 10s linear infinite;
      }

      .header-center h1 {
        margin: 0;
        font-size: 1.3rem;
        letter-spacing: 1.5px;
        text-transform: uppercase;
        font-weight: 600;
        background: linear-gradient(to right, #fff, var(--gold-bright));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      @keyframes spin-slow {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      /* --- CONTAINER --- */
      .settings-container {
        max-width: 700px;
        margin: 40px auto;
        padding: 0 20px;
      }

      .settings-section {
        margin-bottom: 45px;
      }

      .section-title {
        color: var(--gold-bright);
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 3px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
        opacity: 0.9;
      }

      .section-title::after {
        content: "";
        height: 1px;
        background: linear-gradient(
          to right,
          rgba(176, 141, 87, 0.5),
          transparent
        );
        flex-grow: 1;
      }

      .settings-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(176, 141, 87, 0.15);
        border-radius: 12px;
        overflow: hidden;
        backdrop-filter: blur(5px);
      }

      .setting-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 22px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        transition: var(--transition);
      }

      .setting-row:last-child {
        border-bottom: none;
      }
      .setting-row:hover {
        background: rgba(176, 141, 87, 0.03);
      }

      .setting-info {
        display: flex;
        align-items: center;
        gap: 18px;
        flex: 1;
      }
      .setting-info i {
        font-size: 1.2rem;
        color: var(--gold);
        width: 25px;
        text-align: center;
      }

      .setting-label {
        display: block;
        font-size: 1rem;
        font-weight: 600;
        color: #fdfdfd;
      }
      .setting-desc {
        display: block;
        font-size: 0.8rem;
        color: rgba(255, 255, 255, 0.5);
        margin-top: 4px;
        line-height: 1.4;
      }

      select {
        background: var(--emerald-dark);
        color: var(--gold-bright);
        border: 1px solid rgba(176, 141, 87, 0.4);
        padding: 10px 15px;
        border-radius: 8px;
        outline: none;
        font-family: inherit;
        cursor: pointer;
      }

      input[type="range"] {
        width: 100%;
        accent-color: var(--gold);
        height: 5px;
        margin-top: 15px;
      }

      .switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 26px;
      }
      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .slider {
        position: absolute;
        cursor: pointer;
        inset: 0;
        background-color: rgba(255, 255, 255, 0.1);
        transition: 0.4s;
        border-radius: 34px;
        border: 1px solid rgba(176, 141, 87, 0.2);
      }
      .slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 4px;
        bottom: 3px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
      }
      input:checked + .slider {
        background-color: var(--gold);
      }
      input:checked + .slider:before {
        transform: translateX(24px);
      }

      .preview-box {
        background: rgba(0, 0, 0, 0.4);
        border: 1px solid var(--gold);
        border-radius: 12px;
        padding: 25px;
        margin-top: 20px;
        text-align: center;
        position: relative;
      }

      .preview-label {
        position: absolute;
        top: -10px;
        left: 20px;
        background: var(--gold);
        color: var(--emerald-dark);
        font-size: 0.7rem;
        padding: 2px 10px;
        border-radius: 4px;
        font-weight: 800;
        text-transform: uppercase;
      }

      .preview-text {
        color: var(--gold-bright);
        font-style: italic;
        line-height: 1.6;
      }

      .btn-danger {
        background: rgba(255, 68, 68, 0.1);
        border: 1px solid rgba(255, 68, 68, 0.4);
        color: #ff6666;
        padding: 12px 24px;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
        transition: 0.3s;
        text-transform: uppercase;
        font-size: 0.8rem;
        letter-spacing: 1px;
      }

      .btn-danger:hover {
        background: #ff4444;
        color: white;
        box-shadow: 0 0 20px rgba(255, 68, 68, 0.3);
      }

      @media (max-width: 600px) {
        .settings-header {
          grid-template-columns: auto 1fr;
          gap: 15px;
          padding: 15px;
        }
        .header-center {
          justify-content: flex-end;
        }
        .header-center h1 {
          font-size: 1rem;
        }
        .header-center i {
          font-size: 1.4rem;
        }
        .back-home span {
          display: none;
        }
        .setting-row {
          flex-direction: column;
          align-items: flex-start;
          gap: 15px;
        }
        .setting-info {
          width: 100%;
        }
        select {
          width: 100%;
        }
        .switch {
          align-self: flex-end;
        }
      }
    </style>
  </head>
  <body>
    <header class="settings-header">
      <a href="index.html" class="back-home">
        <i class="fas fa-home"></i> <span>Accueil</span>
      </a>
      <div class="header-center">
        <i class="fas fa-cog"></i>
        <h1>R√©glages G√©n√©raux</h1>
      </div>
      <div></div>
    </header>

    <div class="settings-container">
      <div class="settings-section">
        <div class="section-title">Exp√©rience Spirituelle</div>
        <div class="settings-card">
          <div class="setting-row">
            <div class="setting-info">
              <i class="fas fa-mosque"></i>
              <div>
                <span class="setting-label">Profil d'Apprentissage</span>
                <span class="setting-desc"
                  >Adapte les tutoriels audio et visuels selon votre
                  genre.</span
                >
              </div>
            </div>
            <select id="pref-gender">
              <option value="masculin">üë®&nbsp; Fr√®re</option>
              <option value="feminin">üë©&nbsp; S≈ìur</option>
            </select>
          </div>
          <div class="setting-row">
            <div class="setting-info">
              <i class="fas fa-bell"></i>
              <div>
                <span class="setting-label">Notifications de Dhikr</span>
                <span class="setting-desc"
                  >Rappels discrets pour le Tasbih apr√®s chaque Sal√¢t.</span
                >
              </div>
            </div>
            <label class="switch">
              <input type="checkbox" id="pref-dhikr" checked />
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </div>

      <div class="settings-section">
        <div class="section-title">Interface & Confort de Lecture</div>
        <div class="settings-card">
          <div class="setting-row">
            <div class="setting-info">
              <i class="fas fa-palette"></i>
              <div>
                <span class="setting-label">Nuance d'ambiance</span>
                <span class="setting-desc"
                  >Choisissez l'atmosph√®re visuelle de l'application.</span
                >
              </div>
            </div>
            <select id="pref-theme">
              <option value="emerald">üå≤ √âmeraude Royale</option>
              <option value="midnight">üåä Bleu Nuit & Argent</option>
              <option value="dark">üåë Velours Noir & Or</option>
            </select>
          </div>

          <div
            class="setting-row"
            style="flex-direction: column; align-items: stretch"
          >
            <div class="setting-info" style="margin-bottom: 10px">
              <i class="fas fa-text-height"></i>
              <span class="setting-label"
                >Taille des caract√®res (Coran & Sunnah)</span
              >
            </div>
            <input type="range" id="font-range" min="14" max="32" value="18" />
            <div class="preview-box">
              <div class="preview-label">Aper√ßu direct</div>
              <div class="preview-text" id="font-preview">
                "Certes, c'est par l'√©vocation d'Allah que les c≈ìurs
                s'apaisent." (Sore 13:28)
              </div>
            </div>
          </div>

          <div class="setting-row">
            <div class="setting-info">
              <i class="fas fa-clock"></i>
              <span class="setting-label">Format des horaires de pri√®re</span>
            </div>
            <select id="time-format">
              <option value="24">Standard 24h (18:30)</option>
              <option value="12">Format 12h (06:30 PM)</option>
            </select>
          </div>

          <div class="setting-row">
            <div class="setting-info">
              <i class="fas fa-map-marker-alt"></i>
              <span class="setting-label">Calcul des distances</span>
            </div>
            <select id="distance-unit">
              <option value="km">M√©trique (Kilom√®tres)</option>
              <option value="miles">Imp√©rial (Miles)</option>
            </select>
          </div>
        </div>
      </div>

      <div class="settings-section">
        <div class="section-title">Stockage & Confidentialit√©</div>
        <div class="settings-card">
          <div class="setting-row">
            <div class="setting-info">
              <i class="fas fa-database"></i>
              <div>
                <span class="setting-label">Nettoyage des donn√©es</span>
                <span class="setting-desc"
                  >Efface les favoris et les pr√©f√©rences enregistr√©es.</span
                >
              </div>
            </div>
            <button id="clear-cache" class="btn-danger">R√©initialiser</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      const fontRange = document.getElementById("font-range");
      const fontPreview = document.getElementById("font-preview");
      const genderSelect = document.getElementById("pref-gender");
      const themeSelect = document.getElementById("pref-theme"); // Nouveau
      const timeSelect = document.getElementById("time-format");
      const distanceSelect = document.getElementById("distance-unit");
      const dhikrToggle = document.getElementById("pref-dhikr");

      // Charger les pr√©f√©rences
      function loadSettings() {
        const settings =
          JSON.parse(localStorage.getItem("quranlight_prefs")) || {};

        if (settings.fontSize) {
          fontRange.value = settings.fontSize;
          fontPreview.style.fontSize = settings.fontSize + "px";
        }
        if (settings.gender) genderSelect.value = settings.gender;
        if (settings.theme) {
          themeSelect.value = settings.theme;
          applyTheme(settings.theme);
        }
        if (settings.timeFormat) timeSelect.value = settings.timeFormat;
        if (settings.distanceUnit) distanceSelect.value = settings.distanceUnit;
        if (settings.dhikr !== undefined) dhikrToggle.checked = settings.dhikr;
      }

      // Sauvegarde g√©n√©rique
      function saveSetting(key, value) {
        let settings =
          JSON.parse(localStorage.getItem("quranlight_prefs")) || {};
        settings[key] = value;
        localStorage.setItem("quranlight_prefs", JSON.stringify(settings));
      }

      // Appliquer le th√®me visuel
      function applyTheme(themeName) {
        document.body.classList.remove("theme-midnight", "theme-dark");
        if (themeName === "midnight") {
          document.body.classList.add("theme-midnight");
        } else if (themeName === "dark") {
          document.body.classList.add("theme-dark");
        }
      }

      // Ecouteurs
      fontRange.addEventListener("input", (e) => {
        fontPreview.style.fontSize = e.target.value + "px";
        saveSetting("fontSize", e.target.value);
      });

      themeSelect.addEventListener("change", (e) => {
        applyTheme(e.target.value);
        saveSetting("theme", e.target.value);
      });

      genderSelect.addEventListener("change", (e) =>
        saveSetting("gender", e.target.value)
      );
      timeSelect.addEventListener("change", (e) =>
        saveSetting("timeFormat", e.target.value)
      );
      distanceSelect.addEventListener("change", (e) =>
        saveSetting("distanceUnit", e.target.value)
      );
      dhikrToggle.addEventListener("change", (e) =>
        saveSetting("dhikr", e.target.checked)
      );

      document.getElementById("clear-cache").addEventListener("click", () => {
        if (
          confirm(
            "Attention : Cette action effacera toutes vos pr√©f√©rences. Continuer ?"
          )
        ) {
          localStorage.removeItem("quranlight_prefs");
          location.reload();
        }
      });

      loadSettings();
    </script>
    <script src="assets/js/script.js"></script>
  </body>
</html>
